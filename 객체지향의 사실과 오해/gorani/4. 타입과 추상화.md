## 4장-타입과 추상화
요청과 응답은 **협력**에 참여하는 객체가 수행할 **책임을 정의**한다.
객체가 어떤 요청에 대해 **대답**해 줄 수 있거나, 적절한 행동을 할 **의무**가 있는 경우 객체가 책임을 가진다고 말한다.

### 객체의 책임
1. 하는 것
- 객체를 생성하거나 계산을 하는 등의 스스로 하는 것
- 다른 객체의 행동을 시작시키는 것(ex. 모자장수를 입장시키는 것)
- 다른 객체의 활동을 제어하고 조절하는 것
2. 아는 것
- 개인적인 정보에 관해 아는 것
- 관련된 객체에 관해 아는 것(ex. 모자장수가 목격자이다)
- 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

**책임**은 객체의 외부에 제공해 줄 수 있는 **정보**(아는 것)와 외부에 제공해 줄 수 있는 **서비스**(하는 것)의 목록이다.
책임은 객체의 **공용 인터페이스(외부에서 접근가능)**를 구성한다.
책임을 수행하도록 요청을 보내는 것을 **메시지 전송**이라고 한다.
메시지를 전송함으로써 협력을 요청하는 객체를 **송신자**라고 하고 메시지를 받아 요청을 처리하는 객체를 **수신자**라고 한다.

### 역할
**역할**을 사용하면 여러 협력을 포괄할 수 있는 **하나의 협력으로 추상화** 할 수 있다.
역할을 **대체할 수 있는 객체**는 **동일한 메시지를 이해**할 수 있는 객체이다.
역할은 객체지향 설계의 **단순성, 유연성, 재사용성**을 뒷받침하는 핵심 개념이다.

### 객체지향 설계 기법
객체지향의 핵심은 객체가 **협력** 안에서 **어떤 책임과 역할을 수행**할 것인지를 결정하는 것이다.
1. **책임-주도 설계**
협력에 필요한 책임들을 식별하고 적합한 객체에게 책임을 할당하는 방식이다.
개별적인 객체의 상태가 아니라 **객체의 책임과 상호작용**에 집중한다.
2. **디자인 패턴**
패턴은 전문가들이 특정 문제를 해결하기 위해 **이미 식별**해 놓은 역할, 책임, 협력의 모음이다.
3. **테스트-주도 개발**
**테스트를 먼저 작성**하고 테스트를 통과하는 구체적인 코드를 추가하면서 역할, 책임, 협력을 식별하고 식별된 **역할, 책임, 협력이 적합한지를 피드백**받는 것이다.
하지만, 테스트를 작성하는 것이 목적이 아니라, 책임을 수행할 객체가 **어떤 결과를 반환**하고 그 과정에서 **어떤 객체와 협력**할 것인지에 대한 기대를 코드의 형태로 작성하는 것이다.

### 객체지향 시스템을 설계하는 절차
1. 시스템 책임을 파악한다.
2. 책임을 더 작은 책임으로 분할한다.
3. 적절한 객체와 역할을 찾아 책임을 할당한다.
4. 협력할 객체를 찾아 필요한 도움에 대한 책임을 할당한다.

### COMPOSITE 패턴
**Component**는 클라이언트와 협력할 수 있는 **공용 인터페이스를 정의**하는 역할이다.
**Leaf**는 공용 인터페이스에 대한 호출에 응답할 수 있는 기본 **행위를 구현**한다.
**Composite**는 외부로부터 **세부 사항을 감추고** 포함된 부분을 하나의 단위로 행동하는 역할이다.
**Client**는 **메시지를 요청**하는 임의의 협력하는 역할이다.
